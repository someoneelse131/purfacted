# ============================================
# PurFacted Test Environment Configuration
# ============================================
# This file is used for running tests.
# All external services are disabled/mocked.

# ============================================
# APP CONFIGURATION
# ============================================
APP_PORT=3000
APP_HOST=0.0.0.0
PUBLIC_URL=http://localhost:3000
NODE_ENV=test

# ============================================
# DATABASE (PostgreSQL - Test)
# ============================================
# Test database should be separate from development/production
DB_HOST=postgres
DB_PORT=5432
DB_NAME=purfacted_test
DB_USER=purfacted
DB_PASSWORD=test_password
DATABASE_URL=postgresql://purfacted:test_password@postgres:5432/purfacted_test

# ============================================
# REDIS (Test)
# ============================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=test_redis_password

# ============================================
# MAIL CONFIGURATION (Disabled for tests)
# ============================================
MAIL_HOST=localhost
MAIL_PORT=1025
MAIL_USER=
MAIL_PASSWORD=
MAIL_FROM=test@purfacted.com
MAIL_FROM_NAME=PurFacted Test
MAIL_ENCRYPTION=none

# ============================================
# LLM API (Disabled for tests)
# ============================================
LLM_PROVIDER=anthropic
LLM_API_KEY=
LLM_MODEL=claude-3-haiku-20240307

# ============================================
# AUTHENTICATION (Shortened for tests)
# ============================================
SESSION_DURATION_DAYS=1
SESSION_REMEMBER_ME_DAYS=7
EMAIL_VERIFICATION_EXPIRY_HOURS=24
PASSWORD_RESET_EXPIRY_HOURS=1
PASSWORD_RESET_MAX_REQUESTS_PER_HOUR=10
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_NUMBER=true
PASSWORD_REQUIRE_SPECIAL=true
LOGIN_MAX_ATTEMPTS=10
LOGIN_LOCKOUT_MINUTES=5

# ============================================
# TRUST SCORE CONFIGURATION
# ============================================
TRUST_FACT_APPROVED=10
TRUST_FACT_WRONG=-20
TRUST_FACT_OUTDATED=0
TRUST_VETO_SUCCESS=5
TRUST_VETO_FAIL=-5
TRUST_VERIFICATION_CORRECT=3
TRUST_VERIFICATION_WRONG=-10
TRUST_UPVOTED=1
TRUST_DOWNVOTED=-1
TRUST_NEW_USER_START=10
TRUST_ORGANIZATION_START=50

# ============================================
# VOTE WEIGHT CONFIGURATION
# ============================================
VOTE_WEIGHT_ANONYMOUS=0.1
VOTE_WEIGHT_VERIFIED=2
VOTE_WEIGHT_EXPERT=5
VOTE_WEIGHT_PHD=8
VOTE_WEIGHT_ORGANIZATION=100
VOTE_WEIGHT_MODERATOR=3
VOTE_MODIFIER_TRUST_100_PLUS=1.5
VOTE_MODIFIER_TRUST_50_99=1.2
VOTE_MODIFIER_TRUST_0_49=1.0
VOTE_MODIFIER_TRUST_NEG1_NEG25=0.5
VOTE_MODIFIER_TRUST_NEG26_NEG50=0.25
VOTE_MODIFIER_TRUST_BELOW_NEG50=0

# ============================================
# FACT CONFIGURATION
# ============================================
FACT_TITLE_MAX_LENGTH=200
FACT_BODY_MAX_LENGTH=5000
FACT_MAX_PER_DAY_NEW_USER=5
FACT_MIN_VOTES_FOR_STATUS=20
FACT_PROVEN_THRESHOLD=75
FACT_DISPROVEN_THRESHOLD=25

# ============================================
# SOURCE CREDIBILITY
# ============================================
SOURCE_CREDIBILITY_PEER_REVIEWED=5
SOURCE_CREDIBILITY_OFFICIAL=4
SOURCE_CREDIBILITY_NEWS=3
SOURCE_CREDIBILITY_COMPANY=2
SOURCE_CREDIBILITY_BLOG=1

# ============================================
# COMMENTS & DISCUSSIONS
# ============================================
COMMENT_MAX_LENGTH=2000
DISCUSSION_MAX_LENGTH=2000

# ============================================
# DEBATES
# ============================================
DEBATE_MAX_MESSAGES_PER_DAY_STRANGER=10
DEBATE_HISTORY_RETENTION_DAYS=365

# ============================================
# MODERATION
# ============================================
MODERATOR_BOOTSTRAP_THRESHOLD=100
MODERATOR_EARLY_THRESHOLD=500
MODERATOR_TOP_PERCENT=10
MODERATOR_MIN_TRUSTED_USERS=100
MODERATOR_INACTIVE_DAYS=30
VERIFICATION_APPROVALS_REQUIRED=3

# ============================================
# BAN SYSTEM
# ============================================
BAN_FIRST_OFFENSE_DAYS=3
BAN_SECOND_OFFENSE_DAYS=30
VETO_FAIL_THRESHOLD_FOR_FLAG=5

# ============================================
# RATE LIMITING (Relaxed for tests)
# ============================================
RATE_LIMIT_ANONYMOUS_VOTES_PER_DAY=100
RATE_LIMIT_USER_VOTES_PER_DAY=100
RATE_LIMIT_API_REQUESTS_PER_MINUTE=1000

# ============================================
# BOT PREVENTION (Disabled for tests)
# ============================================
CAPTCHA_SITE_KEY=test_site_key
CAPTCHA_SECRET_KEY=
DISPOSABLE_EMAIL_API_URL=

# ============================================
# FEATURE FLAGS (All enabled for testing)
# ============================================
FEATURE_LLM_GRAMMAR_CHECK=false
FEATURE_EMAIL_NOTIFICATIONS=false
FEATURE_ANONYMOUS_VOTING=true
FEATURE_ORGANIZATION_ACCOUNTS=true
FEATURE_DEBATES=true

# ============================================
# TEST-SPECIFIC CONFIG
# ============================================
IP_HASH_SALT=test-ip-salt
